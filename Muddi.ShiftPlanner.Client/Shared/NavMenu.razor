@using Muddi.ShiftPlanner.Client.Services
@using Muddi.ShiftPlanner.Shared.BlazorWASM
@using Muddi.ShiftPlanner.Shared.Contracts.v1.Responses
<RadzenSidebar Expanded="Expanded" ExpandedChanged="ExpandedChanged" class="demos-sidebar">
	<ChildContent>
		<RadzenPanelMenu Match="NavLinkMatch.Prefix">
			<RadzenPanelMenuItem Text="Start" Path="/"></RadzenPanelMenuItem>
			<AuthorizeView>
				<Authorized>
					@foreach (var location in Locations)
					{
						<RadzenPanelMenuItem Text="@location.Name" Path="@location.Path" Icon="@location.Icon"/>
					}
				</Authorized>
			</AuthorizeView>
			<AuthorizeView Policy="@Policies.IsAdmin">
				<RadzenPanelMenuItem Text="Admin">
					<RadzenPanelMenuItem Text="ShiftTypes" Path="/admin/shift-types"></RadzenPanelMenuItem>
					<RadzenPanelMenuItem Text="Frameworks" Path="/admin/frameworks"></RadzenPanelMenuItem>
					<RadzenPanelMenuItem Text="Locations" Path="/admin/locations"></RadzenPanelMenuItem>
				</RadzenPanelMenuItem>
			</AuthorizeView>
		</RadzenPanelMenu>

	</ChildContent>
</RadzenSidebar>

@code {

	[Parameter]
	public bool Expanded { get; set; } = true;

	[Parameter]
	public EventCallback<bool> ExpandedChanged { get; set; }
	[CascadingParameter]
	public IEnumerable<ShiftLocation> Locations { get; set; }
	
	private bool _sidebarExpanded = true;


}