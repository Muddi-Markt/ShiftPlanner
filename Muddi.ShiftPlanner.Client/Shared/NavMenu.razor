@using Muddi.ShiftPlanner.Client.Services
@using Muddi.ShiftPlanner.Shared.BlazorWASM
@using Muddi.ShiftPlanner.Shared.Contracts.v1.Responses
@inject ShiftService ShiftService;
<RadzenSidebar Expanded="Expanded" ExpandedChanged="ExpandedChanged" class="demos-sidebar">
	<ChildContent>
		<RadzenPanelMenu Match="NavLinkMatch.Prefix">
			<RadzenPanelMenuItem Text="Start" Path="/"></RadzenPanelMenuItem>
			<AuthorizeView>
				<Authorized>
					@foreach (var location in ShiftService.GetAllShiftLocations())
					{
						<RadzenPanelMenuItem Text="@($"{location.Name} ({location.PercentageAlreadyAssignedShifts}%)")" Path="@location.Path"/>
					}
				</Authorized>
			</AuthorizeView>
			<AuthorizeView Policy="@Policies.IsAdmin">
				<RadzenPanelMenuItem Text="Admin">
					<RadzenPanelMenuItem Text="ShiftTypes" Path="/admin/shift-types"></RadzenPanelMenuItem>
					<RadzenPanelMenuItem Text="Frameworks" Path="/admin/frameworks"></RadzenPanelMenuItem>
					<RadzenPanelMenuItem Text="Locations" Path="/admin/locations"></RadzenPanelMenuItem>
				</RadzenPanelMenuItem>
				<RadzenPanelMenuItem Text="Statikstiken für Admins" Path="/statistics/employees"></RadzenPanelMenuItem>
				<RadzenPanelMenuItem Text="Export" Path="/admin/export"></RadzenPanelMenuItem>
			</AuthorizeView>
		</RadzenPanelMenu>

	</ChildContent>
</RadzenSidebar>

@code {

	[Parameter]
	public bool Expanded { get; set; } = true;

	[Parameter]
	public EventCallback<bool> ExpandedChanged { get; set; }
	[CascadingParameter]
	public MainLayout MainLayout { get; set; }
	
	private bool _sidebarExpanded = true;


}